{
  "version": "1.0.0",
  "channels": {
    "library-management": {
      "description": "PDF library management operations",
      "requests": {
        "createWorkspace": {
          "description": "Create a new workspace",
          "args": {
            "name": {
              "type": "string",
              "required": true,
              "description": "Workspace name",
              "validation": {
                "minLength": 1,
                "maxLength": 100,
                "pattern": "^[a-zA-Z0-9\\s\\-_]+$"
              }
            },
            "description": {
              "type": "string",
              "required": false,
              "description": "Optional workspace description",
              "validation": {
                "maxLength": 500
              }
            }
          },
          "response": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique workspace identifier"
              },
              "name": {
                "type": "string",
                "description": "Workspace name"
              },
              "createdAt": {
                "type": "string",
                "description": "ISO 8601 creation timestamp"
              }
            }
          },
          "errorCodes": {
            "invalidName": {
              "code": 400,
              "message": "Invalid workspace name",
              "description": "Workspace name contains invalid characters or is too long"
            },
            "nameTaken": {
              "code": 409,
              "message": "Workspace name already exists"
            }
          }
        },
        "deleteWorkspace": {
          "description": "Delete an existing workspace",
          "args": {
            "id": {
              "type": "string",
              "required": true,
              "description": "Workspace ID to delete"
            }
          },
          "response": {
            "type": "object",
            "properties": {
              "success": {
                "type": "boolean",
                "description": "Operation success status"
              }
            }
          },
          "errorCodes": {
            "notFound": {
              "code": 404,
              "message": "Workspace not found"
            }
          }
        },
        "getWorkspaces": {
          "description": "Retrieve all workspaces",
          "args": {},
          "response": {
            "type": "object",
            "properties": {
              "workspaces": {
                "type": "array",
                "description": "Array of workspace objects"
              },
              "total": {
                "type": "integer",
                "description": "Total number of workspaces"
              }
            }
          }
        },
        "addBook": {
          "description": "Add a book to the library",
          "args": {
            "title": {
              "type": "string",
              "required": true,
              "description": "Book title",
              "validation": {
                "minLength": 1,
                "maxLength": 200
              }
            },
            "author": {
              "type": "string",
              "required": false,
              "description": "Book author",
              "validation": {
                "maxLength": 100
              }
            },
            "filePath": {
              "type": "string",
              "required": true,
              "description": "Path to PDF file",
              "validation": {
                "pattern": ".*\\.pdf$"
              }
            },
            "workspaceId": {
              "type": "string",
              "required": true,
              "description": "Target workspace ID"
            },
            "metadata": {
              "type": "object",
              "required": false,
              "description": "Additional book metadata"
            }
          },
          "response": {
            "type": "object",
            "properties": {
              "id": {
                "type": "string",
                "description": "Unique book identifier"
              },
              "title": {
                "type": "string",
                "description": "Book title"
              },
              "indexingStatus": {
                "type": "string",
                "description": "Text indexing status",
                "validation": {
                  "enum": ["pending", "indexing", "completed", "failed"]
                }
              }
            }
          },
          "errorCodes": {
            "fileNotFound": {
              "code": 400,
              "message": "PDF file not found at manifestified path"
            },
            "workspaceNotFound": {
              "code": 404,
              "message": "Target workspace does not exist"
            },
            "invalidPDF": {
              "code": 400,
              "message": "File is not a valid PDF document"
            }
          }
        },
        "searchBooks": {
          "description": "Search books using various criteria",
          "args": {
            "query": {
              "type": "string",
              "required": true,
              "description": "Search query",
              "validation": {
                "minLength": 1,
                "maxLength": 500
              }
            },
            "workspaceId": {
              "type": "string",
              "required": false,
              "description": "Limit search to manifestific workspace"
            },
            "searchType": {
              "type": "string",
              "required": false,
              "description": "Type of search to perform",
              "defaultValue": "fulltext",
              "validation": {
                "enum": ["fulltext", "title", "author", "content", "semantic"]
              }
            },
            "limit": {
              "type": "integer",
              "required": false,
              "description": "Maximum results to return",
              "defaultValue": 50,
              "validation": {
                "minimum": 1,
                "maximum": 1000
              }
            },
            "offset": {
              "type": "integer",
              "required": false,
              "description": "Number of results to skip",
              "defaultValue": 0,
              "validation": {
                "minimum": 0
              }
            }
          },
          "response": {
            "type": "object",
            "properties": {
              "results": {
                "type": "array",
                "description": "Array of matching books with relevance scores"
              },
              "total": {
                "type": "integer",
                "description": "Total number of matching results"
              },
              "searchTime": {
                "type": "number",
                "description": "Search execution time in milliseconds"
              },
              "facets": {
                "type": "object",
                "description": "Search result facets (authors, years, etc.)"
              }
            }
          }
        }
      }
    },
    "task-management": {
      "description": "Background task management operations",
      "requests": {
        "getTasks": {
          "description": "Get all background tasks",
          "args": {
            "status": {
              "type": "string",
              "required": false,
              "description": "Filter by task status",
              "validation": {
                "enum": ["pending", "running", "completed", "failed", "cancelled"]
              }
            }
          },
          "response": {
            "type": "object",
            "properties": {
              "tasks": {
                "type": "array",
                "description": "Array of task objects"
              }
            }
          }
        },
        "cancelTask": {
          "description": "Cancel a running task",
          "args": {
            "taskId": {
              "type": "string",
              "required": true,
              "description": "Task identifier to cancel"
            }
          },
          "response": {
            "type": "object",
            "properties": {
              "cancelled": {
                "type": "boolean",
                "description": "Whether task was successfully cancelled"
              }
            }
          },
          "errorCodes": {
            "taskNotFound": {
              "code": 404,
              "message": "Task not found"
            },
            "cannotCancel": {
              "code": 400,
              "message": "Task cannot be cancelled in current state"
            }
          }
        }
      }
    },
    "llm-operations": {
      "description": "Local LLM-powered document analysis",
      "requests": {
        "analyzeDocument": {
          "description": "Analyze document content using LLM",
          "args": {
            "bookId": {
              "type": "string",
              "required": true,
              "description": "Book ID to analyze"
            },
            "analysisType": {
              "type": "string",
              "required": true,
              "description": "Type of analysis to perform",
              "validation": {
                "enum": ["summary", "keywords", "topics", "sentiment", "classification"]
              }
            },
            "options": {
              "type": "object",
              "required": false,
              "description": "Analysis options",
              "properties": {
                "maxLength": {
                  "type": "integer",
                  "description": "Maximum analysis length"
                },
                "language": {
                  "type": "string",
                  "description": "Document language hint"
                }
              }
            }
          },
          "response": {
            "type": "object",
            "properties": {
              "analysis": {
                "type": "object",
                "description": "Analysis results"
              },
              "confidence": {
                "type": "number",
                "description": "Analysis confidence score (0-1)"
              },
              "processingTime": {
                "type": "number",
                "description": "Processing time in seconds"
              }
            }
          },
          "errorCodes": {
            "bookNotFound": {
              "code": 404,
              "message": "Book not found"
            },
            "llmNotAvailable": {
              "code": 503,
              "message": "LLM service is not available"
            },
            "analysisError": {
              "code": 500,
              "message": "Error during document analysis"
            }
          }
        },
        "getLLMStatus": {
          "description": "Get LLM service status and available models",
          "args": {},
          "response": {
            "type": "object",
            "properties": {
              "available": {
                "type": "boolean",
                "description": "Whether LLM service is available"
              },
              "currentModel": {
                "type": "string",
                "description": "Currently loaded model name"
              },
              "availableModels": {
                "type": "array",
                "description": "List of available models"
              },
              "memoryUsage": {
                "type": "object",
                "description": "Memory usage statistics"
              }
            }
          }
        }
      }
    }
  },
  "models": {
    "Workspace": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique workspace identifier"
        },
        "name": {
          "type": "string",
          "description": "Workspace name"
        },
        "description": {
          "type": "string",
          "description": "Workspace description"
        },
        "createdAt": {
          "type": "string",
          "description": "ISO 8601 creation timestamp"
        },
        "bookCount": {
          "type": "integer",
          "description": "Number of books in workspace"
        }
      },
      "required": ["id", "name", "createdAt"]
    },
    "Book": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique book identifier"
        },
        "title": {
          "type": "string",
          "description": "Book title"
        },
        "author": {
          "type": "string",
          "description": "Book author"
        },
        "filePath": {
          "type": "string",
          "description": "Path to PDF file"
        },
        "workspaceId": {
          "type": "string",
          "description": "Parent workspace ID"
        },
        "fileSize": {
          "type": "integer",
          "description": "File size in bytes"
        },
        "pageCount": {
          "type": "integer",
          "description": "Number of pages"
        },
        "indexingStatus": {
          "type": "string",
          "description": "Text indexing status"
        },
        "createdAt": {
          "type": "string",
          "description": "ISO 8601 creation timestamp"
        },
        "metadata": {
          "type": "object",
          "description": "Additional book metadata"
        }
      },
      "required": ["id", "title", "filePath", "workspaceId", "createdAt"]
    },
    "SearchResult": {
      "type": "object",
      "properties": {
        "bookId": {
          "type": "string",
          "description": "Matching book ID"
        },
        "relevanceScore": {
          "type": "number",
          "description": "Search relevance score (0-1)"
        },
        "matchedSegments": {
          "type": "array",
          "description": "Text segments that matched the query"
        },
        "highlights": {
          "type": "array",
          "description": "Highlighted text snippets"
        }
      },
      "required": ["bookId", "relevanceScore"]
    },
    "Task": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique task identifier"
        },
        "type": {
          "type": "string",
          "description": "Task type"
        },
        "status": {
          "type": "string",
          "description": "Current task status"
        },
        "progress": {
          "type": "number",
          "description": "Task progress (0-1)"
        },
        "createdAt": {
          "type": "string",
          "description": "ISO 8601 creation timestamp"
        },
        "startedAt": {
          "type": "string",
          "description": "ISO 8601 start timestamp"
        },
        "completedAt": {
          "type": "string",
          "description": "ISO 8601 completion timestamp"
        },
        "error": {
          "type": "string",
          "description": "Error message if task failed"
        }
      },
      "required": ["id", "type", "status", "createdAt"]
    }
  }
}